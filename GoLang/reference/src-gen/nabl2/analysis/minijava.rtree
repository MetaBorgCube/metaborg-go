Module("analysis/minijava",[Imports([ImportWildcard("signatures/nabl2/shared"),ImportWildcard("signatures/nabl2/shared/common"),ImportWildcard("signatures/nabl2/shared/constraints"),ImportWildcard("nabl2/shared"),ImportWildcard("signatures/nabl2/runtime"),ImportWildcard("signatures/nabl2/runtime/analysis"),ImportWildcard("signatures/nabl2/runtime/common"),ImportWildcard("signatures/nabl2/runtime/solver"),ImportWildcard("nabl2/runtime"),ImportWildcard("nabl2/runtime/analysis"),ImportWildcard("nabl2/runtime/common"),ImportWildcard("nabl2/runtime/editor"),ImportWildcard("nabl2/runtime/prelude"),ImportWildcard("nabl2/runtime/solver"),ImportWildcard("nabl2/runtime/stdlib")]),Rules([SDefNoArgs("nabl2--custom-labels",Build(NoAnnoList(List([NoAnnoList(Op("Label",[NoAnnoList(Str("\"S\""))])),NoAnnoList(Op("P",[])),NoAnnoList(Op("I",[]))])))),SDefNoArgs("nabl2--custom-label-lt",Match(NoAnnoList(Tuple([NoAnnoList(Op("Label",[NoAnnoList(Str("\"S\""))])),NoAnnoList(Op("I",[]))])))),SDefNoArgs("nabl2--custom-label-lt",Match(NoAnnoList(Tuple([NoAnnoList(Op("Label",[NoAnnoList(Str("\"S\""))])),NoAnnoList(Op("P",[]))])))),SDefNoArgs("nabl2--custom-label-lt",Match(NoAnnoList(Tuple([NoAnnoList(Op("I",[])),NoAnnoList(Op("P",[]))])))),SDefNoArgs("nabl2--custom-label-lt",Match(NoAnnoList(Tuple([NoAnnoList(Op("D",[])),NoAnnoList(Op("Label",[NoAnnoList(Str("\"S\""))]))])))),SDefNoArgs("nabl2--custom-labels-wf",Build(NoAnnoList(Op("Concat",[NoAnnoList(Op("Closure",[NoAnnoList(Op("P",[]))])),NoAnnoList(Op("Concat",[NoAnnoList(Op("Or",[NoAnnoList(Op("Epsilon",[])),NoAnnoList(Op("Concat",[NoAnnoList(Op("Label",[NoAnnoList(Str("\"S\""))])),NoAnnoList(Op("I",[]))]))])),NoAnnoList(Op("Closure",[NoAnnoList(Op("I",[]))]))]))]))))]),Imports([ImportWildcard("signatures"),ImportWildcard("reference/src-gen/nabl2/analysis")]),Signature([Constructors([OpDecl("Int",ConstType(SortNoArgs("Type"))),OpDecl("Bool",ConstType(SortNoArgs("Type"))),OpDecl("IntArray",ConstType(SortNoArgs("Type"))),OpDecl("MainType",ConstType(SortNoArgs("Type"))),OpDecl("ClassType",FunType([ConstType(SortNoArgs("Occurrence"))],ConstType(SortNoArgs("Type")))),OpDecl("MethodType",FunType([ConstType(SortNoArgs("Type")),ConstType(SortNoArgs("Type"))],ConstType(SortNoArgs("Type"))))])]),Rules([RDefNoArgs("nabl2--type-sig-of-hook",RuleNoCond(NoAnnoList(Op("Int",[])),NoAnnoList(List([])))),RDefNoArgs("nabl2--type-sig-of-hook",RuleNoCond(NoAnnoList(Op("Bool",[])),NoAnnoList(List([])))),RDefNoArgs("nabl2--type-sig-of-hook",RuleNoCond(NoAnnoList(Op("IntArray",[])),NoAnnoList(List([])))),RDefNoArgs("nabl2--type-sig-of-hook",RuleNoCond(NoAnnoList(Op("MainType",[])),NoAnnoList(List([])))),RDefNoArgs("nabl2--type-sig-of-hook",RuleNoCond(NoAnnoList(Op("ClassType",[Wld])),NoAnnoList(List([NoAnnoList(Tuple([NoAnnoList(Op("None",[])),NoAnnoList(Op("OccurrenceSort",[]))]))])))),RDefNoArgs("nabl2--type-sig-of-hook",RuleNoCond(NoAnnoList(Op("MethodType",[Wld,Wld])),NoAnnoList(List([NoAnnoList(Tuple([NoAnnoList(Op("None",[])),NoAnnoList(Op("TypeSort",[]))])),NoAnnoList(Tuple([NoAnnoList(Op("None",[])),NoAnnoList(Op("TypeSort",[]))]))]))))]),Rules([RDefT("nabl2--generate-constraint-init-rule",[],[DefaultVarDec("nabl2_source")],Rule(Var("nabl2_term"),NoAnnoList(Tuple([Var("nabl2_args"),Var("nabl2_constraint")])),[WithClause(Id),WithClause(Seq(Assign(Var("s"),App(CallT(SVar("nabl2--new-scope"),[],[Var("nabl2_source")]),NoAnnoList(Str("\"s\"")))),Id)),WithClause(Assign(Var("nabl2_args"),NoAnnoList(Op("Params",[NoAnnoList(Tuple([Var("s")]))])))),WithClause(Assign(Var("nabl2_constraint"),NoAnnoList(Op("CTrue",[])))),WithClause(IfThen(CallNoArgs(SVar("nabl2-debug-constraint-generation-hook")),BA(Seq(CallNoArgs(SVar("concat-strings")),CallNoArgs(SVar("debug"))),NoAnnoList(List([NoAnnoList(Str("\"init ^ \"")),App(CallNoArgs(SVar("pp-NaBL2-CTerm")),NoAnnoList(Tuple([Var("s")])))])))))])),RDefT("nabl2--generate-constraint-default-rule",[],[DefaultVarDec("nabl2_source"),DefaultVarDec("nabl2_args")],Rule(As(Var("nabl2_term"),NoAnnoList(Op("Program",[Var("mc"),Var("cc")]))),Var("nabl2_constraint"),[WithClause(LChoice(Assign(NoAnnoList(Op("Params",[As(Var("nabl2_params"),NoAnnoList(Tuple([Var("s")])))])),Var("nabl2_args")),CallT(SVar("fatal-err"),[],[App(CallNoArgs(SVar("concat-strings")),NoAnnoList(List([NoAnnoList(Str("\"Cannot match expected \"")),NoAnnoList(Str("\"^ (s)\"")),NoAnnoList(Str("\" with actual \"")),App(CallNoArgs(SVar("nabl2--pp-flat-args")),Var("nabl2_args")),NoAnnoList(Str("\" when matching \"")),NoAnnoList(Str("\"Program(mc, cc)\"")),NoAnnoList(Str("\" with \"")),App(CallNoArgs(SVar("pp-NaBL2-Term")),Var("nabl2_term")),NoAnnoList(Str("\".\""))])))]))),WithClause(IfThen(CallNoArgs(SVar("nabl2-debug-constraint-generation-hook")),BA(Seq(CallNoArgs(SVar("concat-strings")),CallNoArgs(SVar("debug"))),NoAnnoList(List([NoAnnoList(Str("\"default\"")),NoAnnoList(Str("\" [[ \"")),App(CallNoArgs(SVar("pp-NaBL2-Term")),Var("nabl2_term")),NoAnnoList(Str("\" ^ \"")),App(CallNoArgs(SVar("pp-NaBL2-CTerm")),Var("nabl2_params")),NoAnnoList(Str("\" ]]\""))]))))),WithClause(Id),WithClause(Seq(Assign(Var("nabl2_index"),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("nabl2_term"))),GenDynRules([SetDynRule(DynRuleId(RDecNoArgs("AstMetadata")),RuleNoCond(Var("nabl2_index"),NoAnnoList(List([NoAnnoList(Tuple([NoAnnoList(Op("Params",[])),Var("nabl2_params")]))]))))]))),WithClause(Assign(Var("nabl2_constraint"),NoAnnoList(Op("CConj",[NoAnnoList(Op("CDistinct",[NoAnnoList(Op("Declarations",[Var("s"),NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Class\""))]))])),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Text",[NoAnnoList(Str("\"Duplicate class\""))])),NoAnnoList(Op("NAME",[]))]))])),NoAnnoList(Op("CConj",[App(CallT(SVar("nabl2--generate-constraint"),[CallNoArgs(SVar("nabl2--generate-constraint-default-rule"))],[Var("nabl2_source"),NoAnnoList(Op("Params",[NoAnnoList(Tuple([Var("s")]))]))]),Var("mc")),App(CallT(SVar("nabl2--generate-constraint"),[CallNoArgs(SVar("nabl2--generate-constraint-Map1-rule"))],[Var("nabl2_source"),NoAnnoList(Op("Params",[NoAnnoList(Tuple([Var("s")]))]))]),Var("cc"))]))]))))])),RDefT("nabl2--generate-constraint-default-rule",[],[DefaultVarDec("nabl2_source"),DefaultVarDec("nabl2_args")],Rule(As(Var("nabl2_term"),NoAnnoList(Op("MainClass",[Var("x"),Wld,Var("st")]))),Var("nabl2_constraint"),[WithClause(LChoice(Assign(NoAnnoList(Op("Params",[As(Var("nabl2_params"),NoAnnoList(Tuple([Var("s")])))])),Var("nabl2_args")),CallT(SVar("fatal-err"),[],[App(CallNoArgs(SVar("concat-strings")),NoAnnoList(List([NoAnnoList(Str("\"Cannot match expected \"")),NoAnnoList(Str("\"^ (s)\"")),NoAnnoList(Str("\" with actual \"")),App(CallNoArgs(SVar("nabl2--pp-flat-args")),Var("nabl2_args")),NoAnnoList(Str("\" when matching \"")),NoAnnoList(Str("\"MainClass(x, _, st)\"")),NoAnnoList(Str("\" with \"")),App(CallNoArgs(SVar("pp-NaBL2-Term")),Var("nabl2_term")),NoAnnoList(Str("\".\""))])))]))),WithClause(IfThen(CallNoArgs(SVar("nabl2-debug-constraint-generation-hook")),BA(Seq(CallNoArgs(SVar("concat-strings")),CallNoArgs(SVar("debug"))),NoAnnoList(List([NoAnnoList(Str("\"default\"")),NoAnnoList(Str("\" [[ \"")),App(CallNoArgs(SVar("pp-NaBL2-Term")),Var("nabl2_term")),NoAnnoList(Str("\" ^ \"")),App(CallNoArgs(SVar("pp-NaBL2-CTerm")),Var("nabl2_params")),NoAnnoList(Str("\" ]]\""))]))))),WithClause(Id),WithClause(Seq(Assign(Var("nabl2_index"),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("nabl2_term"))),GenDynRules([SetDynRule(DynRuleId(RDecNoArgs("AstMetadata")),RuleNoCond(Var("nabl2_index"),NoAnnoList(List([NoAnnoList(Tuple([NoAnnoList(Op("Params",[])),Var("nabl2_params")]))]))))]))),WithClause(Assign(Var("nabl2_constraint"),NoAnnoList(Op("CConj",[NoAnnoList(Op("CGDecl",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Class\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("x"))])),Var("s")])),NoAnnoList(Op("CConj",[NoAnnoList(Op("CPropertyOf",[NoAnnoList(Op("Occurrence",[NoAnnoList(Op("Namespace",[NoAnnoList(Str("\"Class\""))])),Var("x"),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("x"))])),NoAnnoList(Op("Type",[])),NoAnnoList(Op("MainType",[])),NoAnnoList(Str("\"\"")),NoAnnoList(Op("Message",[NoAnnoList(Op("Error",[])),NoAnnoList(Op("Default",[])),App(CallNoArgs(SVar("nabl2--get-ast-index")),Var("nabl2_term"))]))])),App(CallT(SVar("nabl2--generate-constraint"),[CallNoArgs(SVar("nabl2--generate-constraint-default-rule"))],[Var("nabl2_source"),NoAnnoList(Op("Params",[NoAnnoList(Tuple([Var("s")]))]))]),Var("st"))]))]))))]))])])